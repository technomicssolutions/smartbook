{% extends 'base.html' %}

{% block body_id %}purchase{% endblock %}

{% block title %}Purchase Entry{% endblock title %}
{% block controller %}ng-controller="PurchaseController" ng-init="init('{{csrf_token}}')"{% endblock controller %}

{% block content %}

	<div id="main-title">
		<div class="alert alert-info" align="Center"><h4>Purchase Entry</h4></div>
	</div>

	<div class="purchase_form_container">
		<form name="purchase_entry" method="post">
			<div class="form_contents_purchase">
				<div class="section_1_purchase">
					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="purchase_invoice_number">Purchase Invoice Number</label>
						</div>

						<div class="forminput">
							<input type="text" name="purchase_invoice_number" >
						</div>
					</div>


					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="vendor_invoice_number">Vendor Invoice Number </label>
						</div>
						<div class="forminput">
							<input type="text" name="vendor_invoice_number"  >
						</div>
					</div>

					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="vendor_do_number">Vendor DO Number</label>
						</div>
						<div class="forminput">
							<input type="text" name="vendor_do_number"  >
						</div>
					</div>
					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="vendor_invoice_date">Vendor Invoice Date</label>
						</div>
						<div class="forminput">
							<input type="text" name="vendor_invoice_date">
						</div>
					</div>
					
				

					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="purchase_invoice_date">Purchase Invoice Date</label>
						</div>
						<div class="forminput">
							<input type="text" name="purchase_invoice_date">
						</div>
					</div>


					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="brand">Brand</label>
						</div>
						<div class="forminput">
							<select name="brand" >
								{% for brand in brands %}
  									<option value="{{brand.brand}}">{{brand.brand}}</option>
								{% endfor %}
								
							</select>
						</div>
					</div>

					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="vendor">Vendor</label>
						</div>
						<div class="forminput">
							<select name="vendor" ng-model="vendor">
								<option value="select">Select</option>
							</select>
						</div>
					</div>

					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="transport">Transport</label>
						</div>
						<div class="forminput">
							<select name="transport" >
								<option value="select">Select</option>
							</select>
						</div>
					</div>

						
				</div>	
		
				<div class="section_3_purchase">
					<div class="search_purchase">
						<div class="control">
							<label> Item Code </label>
   							<input type='text' id="item_code" ng-model="item_code" ng-change="getItems('item_code')"/>
   						</div>
   						<div class="control">
   							<label> Item name </label>
   							<input type="text" id='item_name' ng-model="item_name" ng-change="getItems('item_name')"/>
   						</div>
   						<div class="control">
   							<label> Barcode </label>
   							<input type="text" id='barcode' ng-model="barcode" ng-change="getItems('barcode')"/>
   						</div>
   						<div class="clear"></div>
	   					<div class="item_list" ng-show='selecting_item' ng-hide="item_selected">
							<div class="item_list_row header">
								<span> Item Code </span>
								<span> Item name </span>
								<span> Barcode </span>
							</div>
							<div ng-repeat="item in items" ng-click="addPurchaseItem(item)" class="item_list_row">
								<span>[[item.item_code]]</span>
								<span>[[item.item_name]]</span>
								<span>[[item.barcode]] </span>
							</div>
							<div class="clear"></div>
						</div>
    				</div>
    				<div class="clear"></div>
   				</div>

   				<div class="purchase_items_list" ng-show="purchase_items.length > 0">
   					<div class="purchase_item_list">
   						<div class="item_list_row header">
							<span class="small_column"> Item Code </span>
							<span> Item name </span>
							<span> Barcode </span>
							<span> Current Stock </span>
							<span> Unit Price </span>
							<span> Qty purchased </span>
							<span> Item Frieght </span>
							<span> Frieght/<br />Unit </span>
							<span> Item Handling </span>
							<span> Handling/<br />Unit </span>
							<span> Expense </span>
							<span class="small_column"> Expense/ <br /> Unit </span>		
							<span> Cost Price </span>
							<span> Selling Price</span>												
							<span> Permit Discount (Amt) </span>
							<span> Permit Discount (%) </span>
							<span> Net Amount </span>
						</div>
						<div ng-repeat="item in purchase_items" class="item_list_row">
							<span class="small_column">[[item.item_code]] </span>
							<span>[[item.item_name]] </span>
							<span>[[item.barcode]] </span>
							<span>[[item.current_stock]] </span>
							<span> <input type="text" ng-model="item.unit_price" ng-change="calculate_cost_price(item)" /> </span>			
							<span> <input type="text" ng-model="item.qty_purchased" ng-change="calculate_net_amount(item)" /> </span> 
							<span> <input type="text" ng-model="item.frieght" ng-change="calculate_frieght(item)" /> </span> 
							<span> [[item.frieght_unit]] </span> 
							<span> <input type="text" ng-model="item.handling" ng-change="calculate_handling(item)"/> </span> 
							<span> [[item.handling_unit]] </span>
							<span> <input type="text" ng-model="item.expense" ng-change="calculate_expense(item)" /> </span>	
							<span class="small_column"> [[item.expense_unit]] </span> </span>
							<span> <input type="text" ng-model="item.cost_price" /> </span>
							<span> <input type="text" ng-model="item.selling_price" ng-change="calculate_discount(item)"/> </span>
									
							<span> <input type="text" ng-model="item.permit_disc_amt" ng-change="calculate_discount_percent(item)" /> </span>
							<span> <input type="text" ng-model="item.permit_disc_percent" ng-change="calculate_discount_amt(item)"/> </span>
							<span> [[item.net_amount]] </span>
						</div>
						<div class="clear"></div>
   					</div>
   					<div class="clear"></div>
   				</div>
   				<div class="clear"></div>
				<div class="section_1_purchase">
					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="vendor_amout">Vendor Amount</label>
						</div>
						<div class="forminput">
							<input type="text" name="vendor_amount">
						</div>
						<div class="formtext_purchase">
							<label for="purchase_expense">Purchase Expense</label>
						</div>
						<div class="forminput">
							<input type="text" name="purchase_expense">
						</div>
					</div>
					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="net_total">Net Total</label>
						</div>
						<div class="forminput">
							<input type="text" name="net_total">
						</div>
					</div>

					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="discount">Discount</label>
						</div>
						<div class="forminput">
							<input type="text" name="discount">
						</div>
					</div>
					<div class="formrow_purchase">
						<div class="formtext_purchase">
							<label for="grant_total">Grant Total</label>
						</div>
						<div class="forminput">
							<input type="text" name="grant_total">
						</div>
					</div>
				</div>
			</div>
			<div  align="Center">
				<div class="buttons">
					<input type="submit" value="Submit">
					<a href="{% url 'home' %}"><input type="button" value="Cancel"></a>
				</div>
			</div>			
		</form>
		<div class="clear"></div>
	</div>

{% endblock content %}








































